extends layout

block content
	.col-md-12.jumbotron
		h1.text-center.col-lg-12 #{title}#[br]#[small 2017 Spring]

		p Welcome to #{title} Homework System

	unless signIn
		.row.col-md-12
			.col-sm-5.col-md-3
				a.btn.btn-block.btn-social.btn-lg.btn-google#login-btn(data-loading-text='<i class="fa fa-google"></i>Signing in...')
					i.fa.fa-google
					| Sign in with Google

				script(type='text/javascript').
					next = function () {
						auth2.attachClickHandler(document.getElementById('login-btn'), {}, onSignIn);
					};

			.col-sm-7.col-md-9
				blockquote
					p You have to sign in to Google to verify your identity.


	script(src='/js/validator.min.js')
	.modal.fade#register-modal(tabindex='-1', role='dialog', aria-labelledby="register-modal-title")
		.modal-dialog(role='document')
			form(action='/register', method='post', data-toggle="validator", role='form')
				.modal-content
					.modal-header
						button.close(type='button', data-dismiss='modal', aria-label='Close')
							span(aria-hidden='true') Ã—
						h3.modal-title#register-modal-title Register required
					.modal-body
						.row
							.col-md-12
								h4 Signing in Google was successful, but you have to register your student identification to use this system.
						.row
							.col-md-12
								.form-group.has-feedback
									label(for='student-id') Student ID
									.input-group#student-id
										input.inputs.form-control(type='text', placeholder='20XX', pattern="^[0-9]{4}$", aria-describedby='student_id-splitter', maxlength='4', name='student_id1', required)
										span#student_id-splitter.input-group-addon -
										input.inputs.form-control(type='text', placeholder='XXXXXX', pattern="^[0-9]{5}$", aria-describedby='student_id-splitter', maxlength='5', name='student_id2', required)
									span.glyphicon.form-control-feedback(aria-hidden='true')
						.row
							.col-md-12
								.form-group.has-feedback
									label(for='name-input') Name
									input.inputs.form-control#name-input(type='text', placeholder='Name', name='name', required)
									span.glyphicon.form-control-feedback(aria-hidden='true')

						script(type="text/javascript").
							$(".inputs").keyup(function () {
								if (this.value.length == this.maxLength) {
									$(this).nextAll('.inputs').eq(0).focus();
								}
							});


					.modal-footer
						input#id_token-input(type='text', hidden='true', name='id_token')
						button.btn.btn-default(type='button', data-dismiss='modal') Close
						button.btn.btn-primary(type='submit') Register